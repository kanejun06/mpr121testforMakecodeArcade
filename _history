{"entries":[{"timestamp":1758702655279,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":28051,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":4157,"diffs":[[1," "]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":73,"length1":53,"diffs":[[1,"        \"device\": \"*\"\n"]]},{"start1":209,"length1":31,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]}]},{"timestamp":1758703231970,"editorVersion":"2.0.56","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":84,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"#)]K~S?gBr0m#M-/xCSj\">l</variable><variable id=\"f^?a@AE}/`dQj[_]v7y[\">REG_TS_L</variable><variable id=\"Ya3o`]]G!kW=(^z4SA%n\">h</variable><variable id=\"$cp!48oE-[i7!r1q`}~)\">REG_TS_H</variable><variable id=\"=n]J9df}kzs2iXdPn?pd\">REG_SOFTRESET</variable><variable id=\"gu:!RRdW/0S+/`zVnij~\">REG_ECR</variable><variable id=\"o$Sn{9+RW?GeTHOe$ahR\">REG_MHDR</variable><variable id=\"J~mG9yE[9+WdTGbsnmU0\">REG_NHDR</variable><variable id=\"*SF|QHA;;[eV~~.9-kjl\">REG_NCLR</variable><variable id=\",%*i5iP}ZZ*jZA`E%TYc\">REG_FDLR</variable><variable id=\"v-rJ9UT(KOtyj.,~DX_z\">REG_MHDF</variable><variable id=\")sx_/z4C?t}7a)=wz}yw\">REG_NHDF</variable><variable id=\"KsF./lWjS@B[B1W?st+#\">REG_NCLF</variable><variable id=\"IkPFlFX;+~o6Cy8g~0O)\">REG_FDLF</variable><variable id=\"mEoAC:y#3+E]8N+P$fl2\">REG_NHDT</variable><variable id=\"%GzMzCBL.dL(~sr:bh$u\">REG_NCLT</variable><variable id=\"nOXwf5jP6{xJL]8[Lcq$\">REG_FDLT</variable><variable id=\"A6XF+^:D*q[(|f8f6V:L\">REG_DEB</variable><variable id=\"GB6fXcjvR}rWq-up{J9(\">REG_CFG1</variable><variable id=\"15Fwih/?Oe@Qr_5G5c9@\">REG_CFG2</variable><variable id=\"ZggFo_j6{R;p/xA/q0*!\">k</variable><variable id=\"c9*m;s38)/Le}5Fod-r8\">m</variable><variable id=\"kuFv;S7jZBkAS8m(RO{v\">MPR</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"const SDA = DigitalPin.P20\" numlines=\"1\" declaredvars=\"SDA\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"const SCL = DigitalPin.P19\" numlines=\"1\" declaredvars=\"SCL\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"const i2c = pins.createI2C(pins.SDA, pins.SCL)\" numlines=\"1\" declaredvars=\"i2c\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"kuFv;S7jZBkAS8m(RO{v\">MPR</field><comment pinned=\"false\" h=\"80\" w=\"160\">← あなたの基板は 0x5B 既定</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">91</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"f^?a@AE}/`dQj[_]v7y[\">REG_TS_L</field><comment pinned=\"false\" h=\"80\" w=\"160\">レジスタ定義</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$cp!48oE-[i7!r1q`}~)\">REG_TS_H</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"=n]J9df}kzs2iXdPn?pd\">REG_SOFTRESET</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">128</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"gu:!RRdW/0S+/`zVnij~\">REG_ECR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">94</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A6XF+^:D*q[(|f8f6V:L\">REG_DEB</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">91</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"GB6fXcjvR}rWq-up{J9(\">REG_CFG1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">92</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"15Fwih/?Oe@Qr_5G5c9@\">REG_CFG2</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">93</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"o$Sn{9+RW?GeTHOe$ahR\">REG_MHDR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">43</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J~mG9yE[9+WdTGbsnmU0\">REG_NHDR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">44</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*SF|QHA;;[eV~~.9-kjl\">REG_NCLR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",%*i5iP}ZZ*jZA`E%TYc\">REG_FDLR</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">46</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"v-rJ9UT(KOtyj.,~DX_z\">REG_MHDF</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">47</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\")sx_/z4C?t}7a)=wz}yw\">REG_NHDF</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">48</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"KsF./lWjS@B[B1W?st+#\">REG_NCLF</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">49</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"IkPFlFX;+~o6Cy8g~0O)\">REG_FDLF</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">50</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mEoAC:y#3+E]8N+P$fl2\">REG_NHDT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">51</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"%GzMzCBL.dL(~sr:bh$u\">REG_NCLT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">52</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"nOXwf5jP6{xJL]8[Lcq$\">REG_FDLT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">53</field></shadow></value><next><block type=\"gameSplash\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" _expanded=\"0\" _input_init=\"true\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">実行</comment><value name=\"title\"><shadow type=\"text\"><field name=\"TEXT\">MPR121 init</field></shadow></value><next><block type=\"function_call\"><mutation name=\"mpr121Init\" functionid=\"B)pQe4JTtZhGSZxdQCWg\"><arg name=\"touch\" id=\"6n10yst8pvp9tfxjg6a5\" type=\"number\"></arg><arg name=\"release\" id=\"zl867lg0j9k2i9pz7s1b\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">反応弱ければ (8,4)→(6,3)</comment><value name=\"6n10yst8pvp9tfxjg6a5\"><shadow type=\"math_number\"><field name=\"NUM\">12</field></shadow></value><value name=\"zl867lg0j9k2i9pz7s1b\"><shadow type=\"math_number\"><field name=\"NUM\">6</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"gameinterval\" x=\"519\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">反応弱ければ (8,4)→(6,3)</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">150</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"c9*m;s38)/Le}5Fod-r8\">m</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"readMask\" functionid=\"AM,heeGyGT9cjc8N0R}U\"></mutation></block></value><next><block type=\"console_log_value\"><comment pinned=\"false\" h=\"80\" w=\"160\">画面右のコンソールに表示</comment><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">mask</field></shadow></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c9*m;s38)/Le}5Fod-r8\">m</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c9*m;s38)/Le}5Fod-r8\">m</field></block></value><statement name=\"DO0\"><block type=\"gamesetbackgroundcolor\"><comment pinned=\"false\" h=\"80\" w=\"160\">何か押されたら背景色変更</comment><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">7</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></statement></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"942\" y=\"0\"><mutation name=\"REG_TTH\" functionid=\":Kgr;GGgB]Da/.LI%;y@\"><arg name=\"k\" id=\"umn8wmm4h1nvsud414vjt\" type=\"number\"></arg></mutation><field name=\"function_name\">REG_TTH</field><value name=\"umn8wmm4h1nvsud414vjt\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">k</field></block></value><statement name=\"STACK\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">65</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">k</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value></block></statement></block><block type=\"function_definition\" x=\"1368\" y=\"0\"><mutation name=\"REG_RTH\" functionid=\"x5Z~O($*::M=L$bm~RcY\"><arg name=\"k\" id=\"5pyw8r2h95e2w0hgqq9vlh\" type=\"number\"></arg></mutation><field name=\"function_name\">REG_RTH</field><value name=\"5pyw8r2h95e2w0hgqq9vlh\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">k</field></block></value><statement name=\"STACK\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">66</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">k</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value></block></statement></block><block type=\"function_definition\" x=\"1794\" y=\"0\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><field name=\"function_name\">w8</field><comment pinned=\"false\" h=\"80\" w=\"160\">I2C ヘルパ</comment><value name=\"wgsg9ag9daoscsyg8pfd\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">reg</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">val</field></block></value><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"const b = pins.createBuffer(2)\" numlines=\"1\" declaredvars=\"b\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"b.setNumber(NumberFormat.UInt8LE, 0, reg)\" numlines=\"1\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"b.setNumber(NumberFormat.UInt8LE, 1, val &amp; 0xFF)\" numlines=\"1\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"i2c.writeBuffer(MPR, b)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1315\"><mutation name=\"r8\" functionid=\"WdBU+6}XwF.W-,$[YyC|\"><arg name=\"reg\" id=\"55yye9r53i7rxzwruds9y\" type=\"number\"></arg></mutation><field name=\"function_name\">r8</field><value name=\"55yye9r53i7rxzwruds9y\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">reg</field></block></value><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"const w = pins.createBuffer(1)\" numlines=\"1\" declaredvars=\"w\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"w.setNumber(NumberFormat.UInt8LE, 0, reg)\" numlines=\"1\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"i2c.writeBuffer(MPR, w)\" numlines=\"1\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"const rb = i2c.readBuffer(MPR, 1)\" numlines=\"1\" declaredvars=\"rb\"></mutation><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">rb.getNumber(NumberFormat.UInt8LE, 0)</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"526\" y=\"1315\"><mutation name=\"readMask\" functionid=\"AM,heeGyGT9cjc8N0R}U\"></mutation><field name=\"function_name\">readMask</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"#)]K~S?gBr0m#M-/xCSj\">l</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"r8\" functionid=\"WdBU+6}XwF.W-,$[YyC|\"><arg name=\"reg\" id=\"55yye9r53i7rxzwruds9y\" type=\"number\"></arg></mutation><value name=\"55yye9r53i7rxzwruds9y\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"f^?a@AE}/`dQj[_]v7y[\">REG_TS_L</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Ya3o`]]G!kW=(^z4SA%n\">h</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"r8\" functionid=\"WdBU+6}XwF.W-,$[YyC|\"><arg name=\"reg\" id=\"55yye9r53i7rxzwruds9y\" type=\"number\"></arg></mutation><value name=\"55yye9r53i7rxzwruds9y\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$cp!48oE-[i7!r1q`}~)\">REG_TS_H</field></block></value></block></value><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">((h &lt;&lt; 8) | l) &amp; 0x0FFF</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1013\" y=\"1315\"><mutation name=\"mpr121Init\" functionid=\"B)pQe4JTtZhGSZxdQCWg\"><arg name=\"touch\" id=\"6n10yst8pvp9tfxjg6a5\" type=\"number\"></arg><arg name=\"release\" id=\"zl867lg0j9k2i9pz7s1b\" type=\"number\"></arg></mutation><field name=\"function_name\">mpr121Init</field><comment pinned=\"false\" h=\"80\" w=\"160\">\"確実に起動する\" 初期化</comment><value name=\"6n10yst8pvp9tfxjg6a5\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">touch</field></block></value><value name=\"zl867lg0j9k2i9pz7s1b\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">release</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"=n]J9df}kzs2iXdPn?pd\">REG_SOFTRESET</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">99</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">5</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gu:!RRdW/0S+/`zVnij~\">REG_ECR</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">5</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"o$Sn{9+RW?GeTHOe$ahR\">REG_MHDR</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J~mG9yE[9+WdTGbsnmU0\">REG_NHDR</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"*SF|QHA;;[eV~~.9-kjl\">REG_NCLR</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\",%*i5iP}ZZ*jZA`E%TYc\">REG_FDLR</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"v-rJ9UT(KOtyj.,~DX_z\">REG_MHDF</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\")sx_/z4C?t}7a)=wz}yw\">REG_NHDF</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"KsF./lWjS@B[B1W?st+#\">REG_NCLF</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"IkPFlFX;+~o6Cy8g~0O)\">REG_FDLF</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"mEoAC:y#3+E]8N+P$fl2\">REG_NHDT</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%GzMzCBL.dL(~sr:bh$u\">REG_NCLT</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">255</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nOXwf5jP6{xJL]8[Lcq$\">REG_FDLT</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A6XF+^:D*q[(|f8f6V:L\">REG_DEB</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"GB6fXcjvR}rWq-up{J9(\">REG_CFG1</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">16</field></shadow></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"15Fwih/?Oe@Qr_5G5c9@\">REG_CFG2</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">36</field></shadow></value><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"ZggFo_j6{R;p/xA/q0*!\">k</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">11</field></block></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"REG_TTH\" functionid=\":Kgr;GGgB]Da/.LI%;y@\"><arg name=\"k\" id=\"umn8wmm4h1nvsud414vjt\" type=\"number\"></arg></mutation><value name=\"umn8wmm4h1nvsud414vjt\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZggFo_j6{R;p/xA/q0*!\">k</field></block></value></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">touch</field></block></value><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"function_call_output\"><mutation name=\"REG_RTH\" functionid=\"x5Z~O($*::M=L$bm~RcY\"><arg name=\"k\" id=\"5pyw8r2h95e2w0hgqq9vlh\" type=\"number\"></arg></mutation><value name=\"5pyw8r2h95e2w0hgqq9vlh\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZggFo_j6{R;p/xA/q0*!\">k</field></block></value></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">release</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"w8\" functionid=\"(9A$+.EH^FiQO^j9N+%U\"><arg name=\"reg\" id=\"wgsg9ag9daoscsyg8pfd\" type=\"number\"></arg><arg name=\"val\" id=\"egbl19c1atej2wzvwrk5\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">12電極を有効化して Run</comment><value name=\"wgsg9ag9daoscsyg8pfd\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"gu:!RRdW/0S+/`zVnij~\">REG_ECR</field></block></value><value name=\"egbl19c1atej2wzvwrk5\"><shadow type=\"math_number\"><field name=\"NUM\">143</field></shadow></value><next><block type=\"device_pause\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">5</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":0,"diffs":[[1,"// --- ボード配線（必要ならここだけ変更） ---\nconst SDA = DigitalPin.P20   // Meowbit + Grove I2C 想定\nconst SCL = DigitalPin.P19\n\n// ============================================\n// MPR121A: 初期化を隠したイベントラッパ\n// ============================================\n"]]},{"start1":255,"length1":22,"diffs":[[1,"    // 既定アドレス（あなたの基板は 0x5B）\n    let ADDR = 0x5B\n    // 既定しきい値\n    let TOUCH_TH = 12\n    let RELEASE_TH = 6\n    // 内部状態\n"]]},{"start1":437,"length1":22,"diffs":[[1,"    // レジスタ定義\n"]]},{"start1":918,"length1":22,"diffs":[[1,"    // コールバック保持\n"]]},{"start1":1048,"length1":23,"diffs":[[1,""]]},{"start1":1669,"length1":19,"diffs":[[1,""]]},{"start1":1747,"length1":114,"diffs":[[1,"        // I2C生成\n        i2c = pins.createI2C(\n            pins.createDigitalInOut(SDA),\n            pins.createDigitalInOut(SCL)\n        )\n"]]},{"start1":1888,"length1":23,"diffs":[[1,"        // 確実に起動する初期化\n"]]},{"start1":1989,"length1":20,"diffs":[[1,""]]},{"start1":2230,"length1":1,"diffs":[[1,""]]},{"start1":2297,"length1":95,"diffs":[[1,"        for (let k = 0; k < 12; k++) { w8(REG_TTH(k), TOUCH_TH); w8(REG_RTH(k), RELEASE_TH) }\n"]]},{"start1":2392,"length1":58,"diffs":[[1,"        w8(REG_ECR, 0x8F); pause(5)  // 12電極有効化\n"]]},{"start1":2471,"length1":25,"diffs":[[1,"        // エッジ検出ポーリング（50ms）\n"]]},{"start1":2642,"length1":86,"diffs":[[1,"                for (let k = 0; k < 12; k++) {\n                    const bit = 1 << k\n"]]},{"start1":2766,"length1":137,"diffs":[[1,"                        const pressed = (m & bit) !== 0\n                        if (pressed) pressedHandlers.forEach(h => h(k))\n                        else releasedHandlers.forEach(h => h(k))\n"]]},{"start1":3060,"length1":32,"diffs":[[1,"    // 外向けAPI（呼ぶだけで内部で初期化される）\n"]]},{"start1":3346,"length1":0,"diffs":[[1,"\n    // 任意：起動前に既定値を変えたいときだけ呼ぶ\n    export function configure(addr: number, touch: number, release: number) {\n        if (started) return // 既に開始後は無視（必要なら再起動版も作れる）\n        ADDR = addr\n        TOUCH_TH = touch\n        RELEASE_TH = release\n    }\n"]]},{"start1":3590,"length1":0,"diffs":[[1,"\n// ============================================\n// 使い方：触れたキーIDを画面に表示（初期化は隠蔽済み）\n// ============================================\nlet lastKey = -1\n\nMPR121A.onPressed(function (k: number) {\n    lastKey = k\n})\nMPR121A.onReleased(function (k: number) {\n    if (lastKey == k) lastKey = -1\n})\n\n// 画面表示\ngame.onPaint(function () {\n    screen.fill(0)\n    screen.print(\"MPR121 Touch ID:\", 4, 8)\n    if (lastKey >= 0) {\n        screen.fillRect(4, 24, 152, 18)\n        screen.print(\"Pressed: T\" + lastKey, 8, 28)\n    } else {\n        screen.print(\"Pressed: none\", 8, 28)\n    }\n})\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":240,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// テストはここに来ます。このパッケージが拡張機能として使用されるときにはコンパイルされません。\n"}]}],"snapshots":[{"timestamp":1758702655278,"editorVersion":"2.0.56","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>","main.ts":" ","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"MPR121test\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}}],"shares":[],"lastSaveTime":1758703532589}